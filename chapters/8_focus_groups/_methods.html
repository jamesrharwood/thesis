<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>methods</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="_methods_files/libs/clipboard/clipboard.min.js"></script>
<script src="_methods_files/libs/quarto-html/quarto.js"></script>
<script src="_methods_files/libs/quarto-html/popper.min.js"></script>
<script src="_methods_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="_methods_files/libs/quarto-html/anchor.min.js"></script>
<link href="_methods_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="_methods_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="_methods_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="_methods_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="_methods_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">



<section id="methods" class="level2">
<h2 class="anchored" data-anchor-id="methods">Methods</h2>
<p>The purpose of this study was to elicit ideas from experts familiar with RG dissemination, on how to address factors that may influence the application of (and thereby adherence to) reporting guidance. My methods had two parts: 1) brainstorming ideas with EQUATOR during workshops and 2) extending this list through focus-groups with guideline developers, publishers, and guideline advocates. I then describe the combined results.</p>
<p>Before describing my workshop and focus group methods in detail, I will briefly outline the key differences. Whereas I actively contributed during the EQUATOR workshops, I tried to remain a passive facilitator during the focus groups - I wanted to capture the thoughts of participants whilst minimising my influence as far as possible. Whereas in the workshops, EQUATOR staff and I spent many hours, across multiple sessions, working through behavioural influences one at a time, focus group participants had limited time and so selected their own influences.</p>
<section id="workshopping-ideas-with-equator" class="level3">
<h3 class="anchored" data-anchor-id="workshopping-ideas-with-equator">Workshopping Ideas with EQUATOR</h3>
<p>I described the workshops I ran with EQUATOR in chapter <strong>?var:chapters.workshops</strong>, including the techniques I used to encourage rich discussion and to navigate my position as a participating researcher, contributing ideas myself whilst facilitating others’ to share their voices. In those workshops, I asked participants to consider each intervention function in turn and suggest ideas employing it. After the workshop, I then labelled each idea with the influence(s) it would be addressing to create an “ideas document” with two columns: influences were described in the left hand column, and ideas in the right hand column. I invited workshop participants to review and edit this document, thereby co-producing lists of influences and ideas. The file can be seen in Appendix #TODO.</p>
</section>
<section id="focus-groups-with-external-stakeholders" class="level3">
<h3 class="anchored" data-anchor-id="focus-groups-with-external-stakeholders">Focus groups with external stakeholders</h3>
<p>Focus groups are researcher-led group discussions that use conversation as a form of data collection <span class="citation" data-cites="givenFocusGroups2008">@givenFocusGroups2008</span>. A key element of focus groups is interactions between participants as they agree, disagree, challenge, and ‘feed off’ of each other. I chose focus groups because I expected this interaction to lead to more ideas being generated than if I interviewed participants in isolation. Focus groups are also a practical way to collect data from larger groups of people. This is in contrast to in-depth interviews which are more useful in eliciting detail about individuals’ perspectives.</p>
<!-- # ASK CA recommended a quote. Is quote necessary? -->
</section>
<section id="sampling" class="level3">
<h3 class="anchored" data-anchor-id="sampling">Sampling</h3>
<p>To seek variation and ideas from broad range of stakeholders, I invited a purposive sample including the developers of popular reporting guidelines, publishing professionals, and academics that have studied reporting guidelines. I asked participants to extend the invite to others they felt would be appropriate. Because the BCW requires input from experts with insight into the intervention, I decided to elicit the opinions of authors in a separate study (see chapter <strong>?var:chapters.pilot</strong>).</p>
<p>Following best-practice, I used information power <span class="citation" data-cites="malterudSampleSizeQualitative2016">@malterudSampleSizeQualitative2016</span> to guide my estimated sample size. Malterud et al.&nbsp;posit that the more relevant information a sample holds, the fewer participants are needed. They argue that sample size sufficiency depends on five factors: 1) whether the study’s aim is narrow or broad, 2) whether samples are considered dense (they have a lot of relevant experience or knowledge of the phenomena) or sparse, 3) whether the study is well supported by theory, 4) the quality of dialogue, and 5) whether data will between compared between participants/groups. My aim was narrow and well defined. My sample was dense in that participants knew a lot about how reporting guidance is disseminated but also showed variance in terms of which guidelines they work on and which parts of the academic system they represented. I used the BCW as an applied theory. I used open questioning and to encourage strong dialogue (I elaborate on this later), and I was not planning a cross-case analysis. Therefore, I deemed my information power sufficient to justify initially recruiting 15-20 participants in 4-5 groups.</p>
<p>I used the dialogue criteria from Information Power to decide when to stop recruiting. By monitoring the number of edits to the co-produced file I could be confident that my information power was good. Once groups began to add fewer and fewer comments, I judged that the benefit of continued recruitment was insufficient given time constraints.</p>
</section>
<section id="materials" class="level3">
<h3 class="anchored" data-anchor-id="materials">Materials</h3>
<p>I used the ideas document generated in the workshops with EQUATOR to prompt discussion in the focus groups. However, because ideas generated by previous participants could bias or limit the creativity of current participants <!-- #ASK CA what bias is this? -->I initially hid them by turning the text in the ideas column white before sharing. I would reveal the text only after participants had exhausted their own imagination (see <a href="#fig-ideas-document">Figure&nbsp;1</a> for an example). All participants could edit this file to record their own ideas or elaborate on other people’s ideas. At the end of each focus group, I would then turn the ideas column white again, ready for the next group to continue the process. In this way, each group built upon the output of the previous groups.</p>
<div id="fig-ideas-document" class="quarto-layout-panel">
<figure class="figure">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="assets/ideas-doc-b4.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Ideas initially hidden</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="assets/ideas-doc-after.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Ideas showing</figcaption>
</figure>
</div>
</div>
</div>
<p></p><figcaption class="figure-caption">Figure&nbsp;1: An example entry in the Ideas Document that was co-edited by participants. Existing ideas were initially hidden (by turning the text white), and only made visible once participants had discussed their own ideas.</figcaption><p></p>
</figure>
</div>
</section>
<section id="focus-groups" class="level3">
<h3 class="anchored" data-anchor-id="focus-groups">Focus Groups</h3>
<p>I conducted focus groups between May-July 2022 online using Zoom. Before each focus group, I asked participants to spend some time thinking about barriers and facilitators. I did this because I wanted participants to get into the frame of mind and come to the focus group “armed” with influences they were ready to discuss. I was also interested to see whether participants would contribute influences that I did not identify in chapters <strong>?var:chapters.synthesis</strong>.</p>
<p>Each focus group lasted 2 hours. Following standard practice, I began by introducing myself and the project in a way that I hoped would help participants relax and to think open-mindedly, not defensively. I explained where the list of influences had come from, and that the influences were in reference to reporting guidelines <em>in general</em>, and not necessarily a comment on any guideline in particular. I encouraged participants to think beyond the guideline documents themselves, and to consider all stakeholders and resources involved. I explained the goal was to brainstorm as many ideas as possible, and not worry about whether ideas were good or bad.</p>
<p>It was not possible for a single focus group to cover all influences within a reasonable amount of time, so I allowed participants to select which items they wanted to discuss. I did this by giving them a few minutes to read through a list of influences, raise any additional influences they felt were missing, and mark those that they wanted to talk about. I occasionally selected influences to discuss myself, either because they had been neglected by previous groups or because I expected participants to have insight into it.</p>
<p>For each influence discussed, I would explain it and allow participants to ask questions. I then asked participants to spend a couple of minutes reflecting on the influence and brainstorming solutions on their own before discussing them as a group. I encouraged this solo reflection because I wanted all participants to engage with the problem. (#REF)</p>
<p>#ASK CA: What is a reference for this technique?</p>
<p>To facilitate discussion, I would ask open ended questions, often drawing on intervention functions from the BCW by asking questions like “how could this be easier to do?” or “how could we change how people feel about this?”. I did this when participants ran out of ideas, or when they got fixated on a particular type of intervention, in which case I would reassure participants that their fixated solution was already documented and that it would be useful to think of alternatives.</p>
<p>Once participants had discussed all of their own ideas, I would reveal the ideas identified by previous groups by changing the colour of text from white to black. Participants could then edit and extend the text until it reflected all of their thoughts too. Ideas were never removed from the document, but participants could add concerns or disagreements if they wanted to. Editing the file in this way allowed participants to document their thoughts in their own words.</p>
<p>After each focus groups I made notes on how the session went and reflected on what I could have done differently. I made a copy of the ideas document and then turned the text in the ideas column white again, ready for the next group. Taking copies after each group created a paper trail of how the document had evolved after each session, and counted the number of additions so that I could monitor how many new ideas had been added and, therefore, whether I could stop data collection. <!-- #STRETCH As a stretch goal, I may go through my audit trail and count the number of ideas added from each group, report these in the results section --></p>
</section>
<section id="data-processing-and-analysis" class="level3">
<h3 class="anchored" data-anchor-id="data-processing-and-analysis">Data processing and analysis</h3>
<p>I used qualitative description for my analysis (<span class="citation" data-cites="bradshawEmployingQualitativeDescription2017">@bradshawEmployingQualitativeDescription2017</span>; <span class="citation" data-cites="kimCharacteristicsQualitativeDescriptive2017">@kimCharacteristicsQualitativeDescriptive2017</span>), which involved aggregating and summarising ideas. I imported the final ideas document into NVivo and applied descriptive codes to ideas. If a sentence contained multiple ideas, I would code each idea separately. I also coded the barriers and stakeholders that were related to each idea. I did not interpret data as doing so would erase the views captured during co-production.</p>
<p>I grouped ideas inductively in ways that felt cohesive and made the results easy for my intended audience (the reporting guideline community) to understand and act upon. For example, I aggregated “ask authors to cite reporting guidelines” and “display citation metrics on reporting guideline resources” into a group about “Citations”, even though they target different barriers (discoverability and perceived trustworthiness) and employ different intervention functions (education and persuasion). <!-- # TODO: ensure wording matches results. --></p>
<p>I discussed and refined my coding, aggregating and summarising with one of my supervisors, Jennifer de Beyer. I sent the aggregated, summarised ideas to focus group participants and EQUATOR members, inviting them to check it reflected their ideas faithfully. I also invited feedback from guideline developers who had shown an interest in the study but had been unable to attend a focus group.</p>
</section>
<section id="reflexivity-trust" class="level3">
<h3 class="anchored" data-anchor-id="reflexivity-trust">Reflexivity &amp; Trust</h3>
<p>In chapter <strong>?var:chapters.workshops</strong> I described my active role within my workshops with EQUATOR and I argued that my subjectivity was an asset within the workshops. In contrast, I tried to remain objective when running focus groups with external stakeholders, in order to capture the perspectives of participants without influencing them. My research paradigm for the focus groups was post-positivist, in that I considered that ideas were “out there”, but that differences in context, experience, and opinion would affect what I (and participants) observed, understood, and concluded.</p>
<p>I wanted to ensure my results could be trusted as an account of participants’ views. Lincoln and Guba <span class="citation" data-cites="lincolnNaturalisticInquiry1985">@lincolnNaturalisticInquiry1985</span> argue that for a study to be trustworthy, the researcher must show that the findings are credible (‘true’), transferable (applicable to other contexts), dependable (consistent and repeatable), and confirmable (shaped by participants, not by the researcher’s bias or motivation). Lincoln and Guba propose a number of techniques to achieve these criteria, and I describe the techniques I used in <a href="#tbl-trust">Table&nbsp;1</a>.</p>
<p>#ASK CA: I haven’t named an approach. I’ve tried to be clear with what I did, but I’ve struggled to find the correct label for it. We talked previously about Active Research but I don’t think this is correct for this chapter.</p>
<div id="tbl-trust" class="anchored">
<table class="table">
<caption>Table&nbsp;1: Techniques for establishing trustworthiness. Based on Lincoln and Guba’s Evaluative Criteria <span class="citation" data-cites="lincolnNaturalisticInquiry1985">@lincolnNaturalisticInquiry1985</span></caption>
<colgroup>
<col style="width: 30%">
<col style="width: 70%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Technique</strong></th>
<th>Implementation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Techniques for establishing credibility</strong></td>
<td></td>
</tr>
<tr class="even">
<td><em>Member-checking</em></td>
<td>Lincoln and Guba argue that member checking is the most important way to the establish validity of an account <span class="citation" data-cites="lincolnNaturalisticInquiry1985">@lincolnNaturalisticInquiry1985</span>. Accordingly, I invited participants to comment on my synthesised results, asking for feedback on the structure of categories, my interpretation of their data, and my findings and conclusions. I also invited participants to comment on the product of my data analysis in the form of itemized information and condensed notes.</td>
</tr>
<tr class="odd">
<td><em>Peer debriefing</em></td>
<td>Throughout the design, data collection, analysis and reporting, Charlotte Albury acted as a disinterested peer. By questioning my reasoning and exploring my assumptions, she helped me become aware of biases, perspectives I was taking for granted, and assumptions I was making. Jennifer de Beyer acted as a disinterested peer during data analysis.</td>
</tr>
<tr class="even">
<td><strong>Techniques for establishing transferability</strong></td>
<td></td>
</tr>
<tr class="odd">
<td><em>Thick description</em></td>
<td>I aspired to report my results with context by indicating when ideas were common or rare, and who they originated from when I felt this was particularly relevant. I reported disagreements, provide quotes, and relationships between ideas.</td>
</tr>
<tr class="even">
<td><strong>Techniques for establishing confirmability</strong></td>
<td></td>
</tr>
<tr class="odd">
<td><em>Audit trail</em></td>
<td>I referred to audio recordings of the focus groups whenever I needed to clarify parts of the document. I kept versions of raw data collected from all stages. I made a note of my own ideas before commencing data collection, documented all stages of the workshops I held internally with the EQUATOR Network, and kept copies of the co-produced file after every focus group. I kept a copy of my coding in NVivo, and versions of the unitized information and summaries that I sent to participants before and after member checking. This audit trail meant that I could be certain of which stages of research ideas originated from.</td>
</tr>
<tr class="even">
<td><em>Reflexivity</em></td>
<td>I wrote down my own ideas before commencing the study (see chapter <strong>?var:chapters.workshops</strong>), along with my beliefs and experiences of reporting guidelines. I continued to keep personal notes throughout planning, data collection, analysis and reporting, in an attempt to remain aware of my own perspectives and positions, and how they may influence my research.</td>
</tr>
</tbody>
</table>
</div>
<!-- |**Techniques for establishing dependability**|
|Inquiry audit Could do #ASK. "External audits involve having a researcher not involved in the research process examine both the process and product of the research study.  The purpose is to evaluate the accuracy and evaluate whether or not the findings, interpretations and conclusions are supported by the data."| -->
<!-- 
   * Data reduction and analysis products - including summaries such as condensed notes, unitized informaiton and quantitative summaries and theoretical notes
    * Data reconstruction and synthesis products - including structure of categories (themes, definitions, and relationships), findings and conclusions and a final report including connections to existing literatures and an integration of concepts, relationships, and interpretations

" Definition

This is when data, analytic categories, interpretations and conclusions are tested with members of those groups from whom the data were originally obtained.

This can be done both formally and informally as opportunities for member checks may arise during the normal course of observation and conversation.

Typically, member checking is viewed as a technique for establishing to the validity of an account. 

Lincoln and Guba posit that this is the most crucial technique for establishing credibility.  However, this technique is controversial.

"

* Peer debriefing

Definition

"It is a process of exposing oneself to a disinterested peer in a manner paralleling an analytical sessions and for the purpose of exploring aspects of the inquiry that might otherwise remain only implicit within the inquirer's mind" (Lincoln & Guba, 1985, p. 308)

Purpose of debriefing

through analytical probing a debriefer can help uncover taken for granted biases, perspectives and assumptions on the researcher's part
through this process the researcher can become aware of his/her posture toward data and analysis
this is an opportunity to test and defend emergent hypotheses and see if they seem reasonable and plausible to a disinterested debriefer
provide the researcher with an opportunity for catharsis

Not done: 

* Prolonged Engagement
* Persistent Observation
* Triangulation
* Peer debriefing
* Negative case analysis
* Referential adequacy

kept personal notes 
* Reflexivity: "Reflexivity is an attitude of attending systematically to the context of knowledge construction, especially to the effect of the researcher, at every step of the research process. 

"A researcher's background and position will affect what they choose to investigate, the angle of investigation, the methods judged most adequate for this purpose, the findings considered most appropriate, and the framing and communication of conclusions" (Malterud, 2001, p. 483-484).

The perspective or position of the researcher shapes all research - quantitative, qualitative, even laboratory science."

Not done: 
* triangulation - not done. 
* Confirmability audit (basically same as inquiry audit) -->
</section>
<section id="ethics-data-management" class="level3">
<h3 class="anchored" data-anchor-id="ethics-data-management">Ethics &amp; Data Management</h3>
<p>The study was approved by the Medical Sciences Interdivisional Research Ethics Committee (R80414/RE001). Participants gave informed consent by completing an online form. Participant’s edits to the co-produced file were anonymous. I recorded the audio of focus groups so that I could refer to them during analysis, if necessary. All data and recordings were kept on secure university storage.</p>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>